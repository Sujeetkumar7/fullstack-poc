<h2 mat-dialog-title class="dialog-title">Stock Transaction</h2>
<div mat-dialog-content>
  <div class="form-container">
    <form [formGroup]="investingForm" class="d-grid gap-3">
  <!-- Stock Name -->
  <div class="d-flex gap-3">

  <div class="form-group flex-fill">
    <label for="name" class="form-label fw-semibold">Stock Name</label>
    <input id="name" type="text" class="form-control form-control-sm" formControlName="name" readonly />
  </div>

  <!-- User -->
  <div class="form-group flex-fill">
    <label for="userId" class="form-label fw-semibold">User</label>
    <input id="userId" type="text" class="form-control form-control-sm" [value]="getUsername()" readonly />
  </div>
</div>
<div class="row">
  <!-- Current Balance -->
  <div class="col-md-6">
    <div class="form-group">
      <label class="form-label fw-semibold">Current Balance</label>
      <input type="text"
             class="form-control form-control-sm bg-light fw-bold text-success"
             [value]="data.balance | currency:'INR':'symbol':'1.0-0'"
             readonly />
    </div>
  </div>

  <!-- Price Per Unit -->
  <div class="col-md-6">
    <div class="form-group">
      <label class="form-label fw-semibold">Price Per Unit</label>
      <input type="text"
             class="form-control form-control-sm bg-light fw-bold text-success"
             [value]="data.row.Ltp | currency:'INR':'symbol':'1.0-0'"
             readonly />
    </div>
  </div>
</div>

   <div class="d-flex gap-3">
  <!-- Quantity -->
  <div class="form-group flex-fill">
    <label for="quantity" class="form-label fw-semibold">Quantity</label>
    <input id="quantity" type="number" class="form-control form-control-sm"
           formControlName="quantity" placeholder="Enter quantity" />
    <div *ngIf="investingForm.get('quantity')?.invalid && investingForm.get('quantity')?.touched"
         class="text-danger mt-1 small">
      Quantity must be at least 1.
    </div>
  </div>

  <!-- Amount -->
  <div class="form-group flex-fill">
  <label class="form-label fw-semibold">Amount</label>
  <input type="text"
         class="form-control form-control-sm bg-light fw-bold text-primary"
         [value]="calculatedAmount | currency:'INR':'symbol':'1.2-2'"
         readonly />
  <div *ngIf="investingForm.errors?.['insufficientBalance']"
       class="text-danger mt-1 small">
    Amount exceeds current balance.
  </div>
</div>

</div>
    </form>
  </div>
</div>

<!-- Action Buttons -->
<div class="dialog-footer-separator"></div>   <!-- border line -->

<div mat-dialog-actions align="end" class="d-flex justify-content-end gap-2 mt-4" style="padding: 10px;">
  <button type="button" class="btn btn-outline-primary btn-sm px-3" (click)="dialogRef.close(false)">
    Cancel
  </button>
  <button type="button" class="btn btn-primary btn-sm px-3" (click)="submit('buy')" [disabled]="!investingForm.valid">
    Buy
  </button>
  <button type="button" class="btn btn-primary btn-sm px-3" (click)="submit('sell')" [disabled]="!investingForm.valid">
    Sell
  </button>
</div>

