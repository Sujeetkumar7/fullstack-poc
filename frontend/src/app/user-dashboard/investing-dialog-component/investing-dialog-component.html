<h2 mat-dialog-title class="fw-bold text-primary mb-3">Stock Transaction</h2>

<div mat-dialog-content>
  <div class="form-container">
    <form [formGroup]="investingForm" class="d-grid gap-3">

      <!-- Stock Name -->
      <div class="form-group">
        <label for="name" class="form-label fw-semibold">Stock Name</label>
        <input id="name" type="text" class="form-control form-control-sm" formControlName="name" readonly />
      </div>

      <!-- User -->
      <div class="form-group">
        <label for="userId" class="form-label fw-semibold">User</label>
        <input id="userId" type="text" class="form-control form-control-sm" [value]="getUsername()" readonly />
      </div>

      <!-- Current Balance -->
      <div class="form-group">
        <label class="form-label fw-semibold">Current Balance</label>
        <input type="text" class="form-control form-control-sm bg-light fw-bold text-success"
               [value]="data.balance | currency:'INR':'symbol':'1.0-0'" readonly />
      </div>

      <!-- Quantity -->
      <div class="form-group">
        <label for="quantity" class="form-label fw-semibold">Quantity</label>
        <input id="quantity" type="number" class="form-control form-control-sm"
               formControlName="quantity" placeholder="Enter quantity" />
        <div *ngIf="investingForm.get('quantity')?.invalid && investingForm.get('quantity')?.touched"
             class="text-danger mt-1 small">
          Quantity must be at least 1.
        </div>
      </div>

      <!-- Computed Amount -->
      <div class="form-group">
        <label class="form-label fw-semibold">Amount</label>
        <input type="text" class="form-control form-control-sm bg-light fw-bold text-primary"
               [value]="calculatedAmount | currency:'INR':'symbol':'1.2-2'" readonly />
      </div>

    </form>
  </div>
</div>

<!-- Action Buttons -->
<div mat-dialog-actions align="end" class="d-flex justify-content-end gap-2 mt-4" style="padding: 10px;">
  <button type="button" class="btn btn-outline-secondary btn-sm px-3" (click)="dialogRef.close(false)">
    Cancel
  </button>
  <button type="button" class="btn btn-success btn-sm px-3" (click)="submit('buy')" [disabled]="!investingForm.valid">
    Buy
  </button>
  <button type="button" class="btn btn-danger btn-sm px-3" (click)="submit('sell')" [disabled]="!investingForm.valid">
    Sell
  </button>
</div>